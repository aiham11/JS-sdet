private static void migrateTestSteps(JsonObject jiraJson, String rallyTestCaseRef, RallyRestApi restApi) throws IOException {
    JsonObject testScript = jiraJson.getAsJsonObject("testScript");
    if (testScript != null) {
        JsonArray stepsArray = testScript.getAsJsonArray("steps");
        if (stepsArray != null) {
            for (JsonElement stepElement : stepsArray) {
                JsonObject stepObject = stepElement.getAsJsonObject();
                JsonObject rallyTestStep = new JsonObject();
                
                rallyTestStep.addProperty("TestCase", rallyTestCaseRef);
                
                // Add null checks for each field
                if (stepObject.get("testData") != null && !stepObject.get("testData").isJsonNull()) {
                    rallyTestStep.addProperty("Input", stepObject.get("testData").getAsString());
                } else {
                    rallyTestStep.addProperty("Input", ""); // Default value or skip
                }
                
                if (stepObject.get("expectedResult") != null && !stepObject.get("expectedResult").isJsonNull()) {
                    rallyTestStep.addProperty("ExpectedResult", stepObject.get("expectedResult").getAsString());
                } else {
                    rallyTestStep.addProperty("ExpectedResult", ""); // Default value or skip
                }
                
                if (stepObject.get("description") != null && !stepObject.get("description").isJsonNull()) {
                    rallyTestStep.addProperty("Description", stepObject.get("description").getAsString());
                } else {
                    rallyTestStep.addProperty("Description", "No Description"); // Default value or skip
                }

                rallyTestStep.addProperty("StepIndex", stepObject.get("index").getAsInt() + 1);

                CreateRequest createStepRequest = new CreateRequest("testcasestep", rallyTestStep);
                CreateResponse createStepResponse = restApi.create(createStepRequest);

                if (createStepResponse.wasSuccessful()) {
                    System.out.println("Successfully created test step: " + createStepResponse.getObject().get("_ref").getAsString());
                } else {
                    System.out.println("Error occurred creating test step:");
                    for (String error : createStepResponse.getErrors()) {
                        System.out.println(error);
                    }
                }
            }
        }
    }
}
