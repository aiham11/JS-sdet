import org.apache.http.impl.client.HttpClientBuilder;

public static HttpEntity getJiraResponse(String url, String apiKey) {
    CloseableHttpClient connection = HttpClientBuilder.create()
        .setDefaultRequestConfig(RequestConfig.custom()
            .setSocketTimeout(10000)  // Increase socket timeout
            .setConnectTimeout(10000) // Increase connection timeout
            .setConnectionRequestTimeout(10000) // Increase request timeout
            .build())
        .build();

    HttpGet request = new HttpGet(url);
    request.setHeader("Authorization", "Bearer " + apiKey);
    CloseableHttpResponse response = null;
    try {
        response = connection.execute(request);
    } catch (ClientProtocolException e) {
        logger.error("Error occurred in Jira connection while connecting " + url, e);
    } catch (IOException e) {
        logger.error("Error occurred in Jira connection while connecting " + url, e);
    }
    HttpEntity entity = response.getEntity();
    if (entity != null) {
        logger.info("Successfully returned HttpEntity response for the URL " + url);
        return entity;
    } else {
        logger.error("Error occurred. HttpEntity is null and no response is received for the URL." + url);
        return null;
    }
}
