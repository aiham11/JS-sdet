private String removeHtmlTagsAndPreserveWhitespace(String input) {
    if (input == null) {
        return "";
    }

    // Replace <br> and <p> tags with newline characters before removing other HTML tags
    input = input.replaceAll("(?i)<br\\s*/?>", "\n")
                 .replaceAll("(?i)<p\\s*/?>", "\n")
                 .replaceAll("(?i)</p>", "\n");

    // Use Jsoup to parse the string and remove other HTML tags
    String cleanedText = Jsoup.parse(input).text();

    // Replace multiple spaces with a single space to avoid extra spaces
    cleanedText = cleanedText.replaceAll("\\s+", " ").trim();

    // Ensure that we preserve newlines where they existed in the original text
    cleanedText = cleanedText.replaceAll("\\n", "\n");

    return cleanedText;
}
