
private String stripFormatting(String input) {
    if (input == null) {
        return ""; // Return an empty string if input is null
    }

    // Remove HTML tags
    input = input.replaceAll("<[^>]*>", "");

    // Ensure that sequences of spaces or tabs are converted into single spaces
    input = input.replaceAll("\\s+", " ");

    // Replace specific logical breaks with a newline
    input = input.replaceAll("\\.\\s", ".\n")      // Add newline after periods followed by space
                 .replaceAll("(?<=\\d)(?=\\s[A-Z])", "\n") // Add newline after digits followed by capitalized words
                 .replaceAll("(?<=\\w:)(?=\\s)", "\n")     // Add newline after colons followed by space
                 .replaceAll("\\s{2,}", "\n");             // Replace any sequence of 2 or more spaces with a newline

    return input.trim(); // Trim any leading or trailing whitespace
}
