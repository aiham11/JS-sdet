public void migrateTestSteps(String rallyTestCaseRef, List<JiraTestStep> jiraTestSteps, RallyRestApi rallyRestApi, Map<Integer, List<String>> attachmentOIDsMap) {
    Collections.reverse(jiraTestSteps);

    for (JiraTestStep step : jiraTestSteps) {
        try {
            JsonObject newTestStep = new JsonObject();
            newTestStep.addProperty("TestCase", rallyTestCaseRef);
            newTestStep.addProperty("StepIndex", step.getIndex());

            // Get the original step data
            String description = step.getDescription();
            String expectedResult = step.getExpectedResult();
            String testData = step.getTestData();

            // Prepare a block of text for all attachments
            StringBuilder attachmentsBlock = new StringBuilder("\n\n**Attachments:**\n");
            List<String> stepAttachmentOIDs = attachmentOIDsMap.get(step.getIndex());
            if (stepAttachmentOIDs != null && !stepAttachmentOIDs.isEmpty()) {
                for (String attachmentOID : stepAttachmentOIDs) {
                    attachmentsBlock.append("- [Attachment: ").append(attachmentOID).append("]\n");
                }
            }

            // Append the attachments block to the step data
            newTestStep.addProperty("Input", description + attachmentsBlock.toString());
            newTestStep.addProperty("ExpectedResult", expectedResult + attachmentsBlock.toString());
            newTestStep.addProperty("TestData", testData + attachmentsBlock.toString());

            CreateRequest createRequest = new CreateRequest("testcasestep", newTestStep);
            CreateResponse createResponse = rallyRestApi.create(createRequest);

            if (createResponse.wasSuccessful()) {
                logger.info("Successfully created test step: " + step.getDescription());
            } else {
                logger.error("Failed to create test step: " + step.getDescription() + ". Error: " + Arrays.toString(createResponse.getErrors()));
            }
        } catch (Exception e) {
            logger.error("Exception while creating test step: " + step.getDescription(), e);
        }
    }
}
